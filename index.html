<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Engineering Quiz Speed Test - Pro Version</title>
    <style>
        :root {
            --primary-color: #3498db;
            --secondary-color: #2ecc71;
            --danger-color: #e74c3c;
            --dark-color: #2c3e50;
            --light-color: #ecf0f1;
            --timer-bg: #f39c12;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: #f5f7fa;
            color: var(--dark-color);
            line-height: 1.6;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            background-color: var(--primary-color);
            color: white;
            text-align: center;
            padding: 20px 0;
            border-radius: 8px 8px 0 0;
            margin-bottom: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        h1 {
            font-size: 2.2rem;
            margin-bottom: 5px;
        }

        .pro-badge {
            background-color: var(--secondary-color);
            color: white;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
            margin-left: 10px;
        }

        .quiz-setup {
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }

        .topic-selection {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-bottom: 20px;
        }

        label {
            font-weight: bold;
        }

        select {
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 1rem;
            width: 100%;
        }

        .btn {
            display: inline-block;
            padding: 12px 24px;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: bold;
            transition: background-color 0.3s;
        }

        .btn:hover {
            background-color: #2980b9;
        }

        .btn-start {
            width: 100%;
            background-color: var(--secondary-color);
        }

        .btn-start:hover {
            background-color: #27ae60;
        }

        .btn-danger {
            background-color: var(--danger-color);
        }

        .btn-danger:hover {
            background-color: #c0392b;
        }

        .quiz-container, .results-container, .leaderboard-container, .review-container {
            display: none;
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }

        .quiz-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }

        .question-counter, .score-display {
            font-weight: bold;
            font-size: 1.1rem;
        }

        .timer-container {
            width: 100%;
            height: 10px;
            background-color: #ddd;
            border-radius: 5px;
            margin-bottom: 20px;
            overflow: hidden;
        }

        .timer-bar {
            height: 100%;
            width: 100%;
            background-color: var(--timer-bg);
            border-radius: 5px;
            transition: width 0.1s linear;
        }

        .question {
            font-size: 1.2rem;
            margin-bottom: 20px;
        }

        .options {
            display: grid;
            grid-template-columns: 1fr;
            gap: 10px;
            margin-bottom: 20px;
        }

        .option {
            padding: 15px;
            background-color: var(--light-color);
            border: 1px solid #ddd;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.1s;
        }

        .option:hover {
            background-color: #ddd;
            transform: translateY(-2px);
        }

        .selected {
            background-color: var(--primary-color);
            color: white;
        }

        .correct {
            background-color: var(--secondary-color);
            color: white;
        }

        .incorrect {
            background-color: var(--danger-color);
            color: white;
        }

        .results-container h2, .leaderboard-container h2, .review-container h2 {
            margin-bottom: 20px;
            color: var(--primary-color);
        }

        .results-details {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            margin-bottom: 20px;
        }

        .result-item {
            flex: 1 0 30%;
            background-color: var(--light-color);
            padding: 15px;
            border-radius: 4px;
            text-align: center;
            margin-bottom: 10px;
        }

        .result-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--primary-color);
        }

        .results-actions, .review-actions {
            display: flex;
            gap: 10px;
            justify-content: space-between;
            margin-top: 20px;
        }

        .leaderboard-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }

        .leaderboard-table th, .leaderboard-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        .leaderboard-table th {
            background-color: var(--primary-color);
            color: white;
        }

        .leaderboard-table tr:nth-child(even) {
            background-color: var(--light-color);
        }

        .review-item {
            background-color: var(--light-color);
            padding: 15px;
            border-radius: 4px;
            margin-bottom: 15px;
        }

        .review-question {
            font-weight: bold;
            margin-bottom: 10px;
        }

        .review-options {
            margin-bottom: 10px;
        }

        .review-option {
            padding: 8px;
            margin-bottom: 5px;
            border-radius: 4px;
        }

        .review-user-answer {
            margin-top: 10px;
            font-weight: bold;
        }

        .review-correct {
            color: var(--secondary-color);
        }

        .review-incorrect {
            color: var(--danger-color);
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.4);
        }

        .modal-content {
            background-color: white;
            margin: 15% auto;
            padding: 20px;
            border-radius: 8px;
            max-width: 500px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }

        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }

        .close:hover {
            color: black;
        }

        .form-group {
            margin-bottom: 15px;
        }

        input[type="text"] {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 1rem;
        }

        footer {
            text-align: center;
            margin-top: 20px;
            padding: 10px 0;
            color: #888;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }

            h1 {
                font-size: 1.8rem;
            }

            .options {
                grid-template-columns: 1fr;
            }

            .results-details {
                flex-direction: column;
            }

            .result-item {
                flex: 1 0 100%;
            }

            .results-actions, .review-actions {
                flex-direction: column;
            }

            .btn {
                width: 100%;
                margin-bottom: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Engineering Quiz Speed Test <span class="pro-badge">PRO</span></h1>
            <p>Test your knowledge with timed quizzes on various engineering topics</p>
        </header>

        <div class="quiz-setup">
            <div class="topic-selection">
                <label for="topic">Select Engineering Topic:</label>
                <select id="topic">
                    <option value="" disabled selected>Choose a topic</option>
                    <option value="mechanical">Mechanical Engineering</option>
                    <option value="electrical">Electrical Engineering</option>
                    <option value="civil">Civil Engineering</option>
                    <option value="chemical">Chemical Engineering</option>
                    <option value="software">Software Engineering</option>
                    <option value="aerospace">Aerospace Engineering</option>
                    <option value="biomedical">Biomedical Engineering</option>
                    <option value="environmental">Environmental Engineering</option>
                </select>
            </div>
            <button id="start-quiz" class="btn btn-start">Start Quiz</button>
        </div>

        <div id="quiz-container" class="quiz-container">
            <div class="quiz-header">
                <div class="question-counter">Question 1/10</div>
                <div class="score-display">Score: 0</div>
            </div>
            <div class="timer-container">
                <div class="timer-bar"></div>
            </div>
            <div id="question" class="question"></div>
            <div id="options" class="options"></div>
        </div>

        <div id="results-container" class="results-container">
            <h2>Quiz Results</h2>
            <div class="results-details">
                <div class="result-item">
                    <div>Score</div>
                    <div id="final-score" class="result-value">0/10</div>
                </div>
                <div class="result-item">
                    <div>Correct Answers</div>
                    <div id="correct-answers" class="result-value">0</div>
                </div>
                <div class="result-item">
                    <div>Time Taken</div>
                    <div id="time-taken" class="result-value">0s</div>
                </div>
            </div>
            <div class="results-actions">
                <button id="save-score" class="btn">Save Score to Leaderboard</button>
                <button id="view-review" class="btn">Review Answers</button>
                <button id="restart-quiz" class="btn">Start New Quiz</button>
            </div>
        </div>

        <div id="leaderboard-container" class="leaderboard-container">
            <h2>Leaderboard</h2>
            <table class="leaderboard-table">
                <thead>
                    <tr>
                        <th>Rank</th>
                        <th>Name</th>
                        <th>Topic</th>
                        <th>Score</th>
                        <th>Time</th>
                    </tr>
                </thead>
                <tbody id="leaderboard-body"></tbody>
            </table>
            <button id="back-to-results" class="btn">Back to Results</button>
        </div>

        <div id="review-container" class="review-container">
            <h2>Review Answers</h2>
            <div id="review-items"></div>
            <div class="review-actions">
                <button id="back-to-results-from-review" class="btn">Back to Results</button>
                <button id="new-quiz-from-review" class="btn btn-start">Start New Quiz</button>
            </div>
        </div>

        <div id="save-score-modal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>Save Your Score</h2>
                    <span class="close">&times;</span>
                </div>
                <div class="form-group">
                    <label for="user-name">Your Name:</label>
                    <input type="text" id="user-name" placeholder="Enter your name">
                </div>
                <button id="submit-score" class="btn btn-start">Save Score</button>
            </div>
        </div>

        <footer>
            <p>&copy; 2025 Engineering Quiz Speed Test Pro. All rights reserved.</p>
        </footer>
    </div>

    <script>
        // DOM Elements
        const topicSelect = document.getElementById('topic');
        const startQuizBtn = document.getElementById('start-quiz');
        const quizContainer = document.getElementById('quiz-container');
        const questionCounter = document.querySelector('.question-counter');
        const scoreDisplay = document.querySelector('.score-display');
        const timerBar = document.querySelector('.timer-bar');
        const questionElement = document.getElementById('question');
        const optionsElement = document.getElementById('options');
        const resultsContainer = document.getElementById('results-container');
        const finalScoreElement = document.getElementById('final-score');
        const correctAnswersElement = document.getElementById('correct-answers');
        const timeTakenElement = document.getElementById('time-taken');
        const saveScoreBtn = document.getElementById('save-score');
        const viewReviewBtn = document.getElementById('view-review');
        const restartQuizBtn = document.getElementById('restart-quiz');
        const leaderboardContainer = document.getElementById('leaderboard-container');
        const leaderboardBody = document.getElementById('leaderboard-body');
        const backToResultsBtn = document.getElementById('back-to-results');
        const reviewContainer = document.getElementById('review-container');
        const reviewItems = document.getElementById('review-items');
        const backToResultsFromReviewBtn = document.getElementById('back-to-results-from-review');
        const newQuizFromReviewBtn = document.getElementById('new-quiz-from-review');
        const saveScoreModal = document.getElementById('save-score-modal');
        const closeModalBtn = document.querySelector('.close');
        const userNameInput = document.getElementById('user-name');
        const submitScoreBtn = document.getElementById('submit-score');
        const quizSetup = document.querySelector('.quiz-setup');

        // Quiz variables
        let currentQuestionIndex = 0;
        let score = 0;
        let timer;
        let timeLeft = 20;
        let totalTime = 0;
        let quizQuestions = [];
        let userAnswers = [];
        let quizTopic = '';

        // Question banks for each topic
        // NOTE: These are empty arrays that you'll fill in later
        const questionBanks = {
            mechanical: [],
            electrical: [],
            civil: [],
            chemical: [],
            software: [],
            aerospace: [],
            biomedical: [],
            environmental: []
        };

        // Leaderboard data
        let leaderboard = JSON.parse(localStorage.getItem('quizLeaderboard')) || [];

        // Event Listeners
        startQuizBtn.addEventListener('click', startQuiz);
        saveScoreBtn.addEventListener('click', openSaveScoreModal);
        viewReviewBtn.addEventListener('click', showReview);
        restartQuizBtn.addEventListener('click', resetQuiz);
        backToResultsBtn.addEventListener('click', showResults);
        backToResultsFromReviewBtn.addEventListener('click', showResults);
        newQuizFromReviewBtn.addEventListener('click', resetQuiz);
        closeModalBtn.addEventListener('click', closeModal);
        submitScoreBtn.addEventListener('click', saveScore);

        window.addEventListener('click', (e) => {
            if (e.target === saveScoreModal) {
                closeModal();
            }
        });

        // Functions
        function startQuiz() {
            quizTopic = topicSelect.value;
            
            if (!quizTopic) {
                alert('Please select a topic first!');
                return;
            }
            
            // Get 10 random questions from the selected topic
            const allQuestions = questionBanks[quizTopic];
            
            if (allQuestions.length < 10) {
                alert('Not enough questions available for this topic. Please try another topic.');
                return;
            }
            
            quizQuestions = getRandomQuestions(allQuestions, 10);
            currentQuestionIndex = 0;
            score = 0;
            userAnswers = [];
            totalTime = 0;
            
            // Show quiz container and hide other containers
            quizSetup.style.display = 'none';
            quizContainer.style.display = 'block';
            resultsContainer.style.display = 'none';
            leaderboardContainer.style.display = 'none';
            reviewContainer.style.display = 'none';
            
            // Display first question
            displayQuestion();
        }

        function getRandomQuestions(questions, count) {
            const shuffled = [...questions].sort(() => 0.5 - Math.random());
            return shuffled.slice(0, count);
        }

        function displayQuestion() {
            // Update question counter
            questionCounter.textContent = `Question ${currentQuestionIndex + 1}/10`;
            scoreDisplay.textContent = `Score: ${score}`;
            
            // Get current question
            const currentQuestion = quizQuestions[currentQuestionIndex];
            
            // Set question text
            questionElement.textContent = currentQuestion.question;
            
            // Clear previous options
            optionsElement.innerHTML = '';
            
            // Add options
            currentQuestion.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.classList.add('option');
                optionElement.textContent = option;
                optionElement.dataset.index = index;
                optionElement.addEventListener('click', selectOption);
                optionsElement.appendChild(optionElement);
            });
            
            // Start timer
            startTimer();
        }

        function startTimer() {
            // Reset timer
            clearInterval(timer);
            timeLeft = 20;
            timerBar.style.width = '100%';
            
            // Start countdown
            timer = setInterval(() => {
                timeLeft--;
                totalTime++;
                
                // Update timer bar
                const percentage = (timeLeft / 20) * 100;
                timerBar.style.width = `${percentage}%`;
                
                // Change color when time is running out
                if (timeLeft <= 5) {
                    timerBar.style.backgroundColor = '#e74c3c';
                } else {
                    timerBar.style.backgroundColor = '#f39c12';
                }
                
                // Time's up
                if (timeLeft === 0) {
                    clearInterval(timer);
                    // Record that user didn't answer
                    userAnswers.push({
                        question: quizQuestions[currentQuestionIndex].question,
                        userAnswer: null,
                        correctAnswer: quizQuestions[currentQuestionIndex].options[quizQuestions[currentQuestionIndex].correctIndex],
                        isCorrect: false
                    });
                    
                    nextQuestion();
                }
            }, 1000);
        }

        function selectOption(event) {
            // Clear interval
            clearInterval(timer);
            
            // Get all options
            const options = optionsElement.querySelectorAll('.option');
            
            // Remove any previous selections
            options.forEach(option => {
                option.classList.remove('selected');
                option.removeEventListener('click', selectOption);
            });
            
            // Add selected class to clicked option
            event.target.classList.add('selected');
            
            // Get selected option index
            const selectedIndex = parseInt(event.target.dataset.index);
            const currentQuestion = quizQuestions[currentQuestionIndex];
            const isCorrect = selectedIndex === currentQuestion.correctIndex;
            
            // Record user's answer
            userAnswers.push({
                question: currentQuestion.question,
                userAnswer: currentQuestion.options[selectedIndex],
                correctAnswer: currentQuestion.options[currentQuestion.correctIndex],
                isCorrect: isCorrect
            });
            
            // Update score if correct
            if (isCorrect) {
                score++;
                scoreDisplay.textContent = `Score: ${score}`;
                event.target.classList.add('correct');
            } else {
                event.target.classList.add('incorrect');
                
                // Show correct answer
                options[currentQuestion.correctIndex].classList.add('correct');
            }
            
            // Wait 1 second before moving to next question
            setTimeout(() => {
                nextQuestion();
            }, 1000);
        }

        function nextQuestion() {
            currentQuestionIndex++;
            
            // Check if quiz is finished
            if (currentQuestionIndex >= quizQuestions.length) {
                endQuiz();
                return;
            }
            
            // Display next question
            displayQuestion();
        }

        function endQuiz() {
            // Stop timer
            clearInterval(timer);
            
            // Hide quiz container
            quizContainer.style.display = 'none';
            
            // Show results
            showResults();
        }

        function showResults() {
            // Update result elements
            finalScoreElement.textContent = `${score}/10`;
            correctAnswersElement.textContent = score;
            timeTakenElement.textContent = `${totalTime}s`;
            
            // Show results container
            resultsContainer.style.display = 'block';
            leaderboardContainer.style.display = 'none';
            reviewContainer.style.display = 'none';
        }

        function openSaveScoreModal() {
            saveScoreModal.style.display = 'block';
            userNameInput.focus();
        }

        function closeModal() {
            saveScoreModal.style.display = 'none';
        }

        function saveScore() {
            const userName = userNameInput.value.trim();
            
            if (!userName) {
                alert('Please enter your name!');
                return;
            }
            
            // Create score object
            const scoreObj = {
                name: userName,
                topic: topicSelect.options[topicSelect.selectedIndex].text,
                score: score,
                time: totalTime,
                date: new Date().toISOString()
            };
            
            // Add to leaderboard
            leaderboard.push(scoreObj);
            
            // Sort leaderboard by score (desc) and time (asc)
            leaderboard.sort((a, b) => {
                if (a.score !== b.score) {
                    return b.score - a.score;
                }
                return a.time - b.time;
            });
            
            // Trim leaderboard to top 10
            if (leaderboard.length > 10) {
                leaderboard = leaderboard.slice(0, 10);
            }
            
            // Save to localStorage
            localStorage.setItem('quizLeaderboard', JSON.stringify(leaderboard));
            
            // Close modal
            closeModal();
            
            // Show leaderboard
            displayLeaderboard();
        }

        function displayLeaderboard() {
            // Clear leaderboard body
            leaderboardBody.innerHTML = '';
            
            // Add entries
            leaderboard.forEach((entry, index) => {
                const row = document.createElement('tr');
                
                // Rank column
                const rankCell = document.createElement('td');
                rankCell.textContent = index + 1;
                row.appendChild(rankCell);
                
                // Name column
                const nameCell = document.createElement('td');
                nameCell.textContent = entry.name;
                row.appendChild(nameCell);
                
                // Topic column
                const topicCell = document.createElement('td');
                topicCell.textContent = entry.topic;
                row.appendChild(topicCell);
                
                // Score column
                const scoreCell = document.createElement('td');
                scoreCell.textContent = `${entry.score}/10`;
                row.appendChild(scoreCell);
                
                // Time column
                const timeCell = document.createElement('td');
                timeCell.textContent = `${entry.time}s`;
                row.appendChild(timeCell);
                
                leaderboardBody.appendChild(row);
            });
            
            // Show leaderboard container
            resultsContainer.style.display = 'none';
            leaderboardContainer.style.display = 'block';
            reviewContainer.style.display = 'none';
        }

        function showReview() {
            // Clear review items
            reviewItems.innerHTML = '';
            
            // Add review items for each question
            userAnswers.forEach((answer, index) => {
                const reviewItem = document.createElement('div');
                reviewItem.classList.add('review-item');
                
                // Question
                const questionElement = document.createElement('div');
                questionElement.classList.add('review-question');
                questionElement.textContent = `Q${index + 1}: ${answer.question}`;
                reviewItem.appendChild(questionElement);
                
                // Options
                const optionsElement = document.createElement('div');
                optionsElement.classList.add('review-options');
                
                // Get options from the quiz questions
                const questionOptions = quizQuestions[index].options;
                questionOptions.forEach((option, optionIndex) => {
                    const optionElement = document.createElement('div');
                    optionElement.classList.add('review-option');
                    
                    // Highlight correct answer
                    if (option === answer.correctAnswer) {
                        optionElement.classList.add('correct');
                        optionElement.textContent = `${option} âœ“`;
                    } else {
                        optionElement.textContent = option;
                    }
                    
                    optionsElement.appendChild(optionElement);
                });
                reviewItem.appendChild(optionsElement);
                
                // User answer
                const userAnswerElement = document.createElement('div');
                userAnswerElement.classList.add('review-user-answer');
                
                if (answer.userAnswer === null) {
                    userAnswerElement.textContent = 'Your answer: No answer (Time expired)';
                    userAnswerElement.classList.add('review-incorrect');
                } else if (answer.isCorrect) {
                    userAnswerElement.textContent = `Your answer: ${answer.userAnswer}`;
                    userAnswerElement.classList.add('review-correct');
                } else {
                    userAnswerElement.textContent = `Your answer: ${answer.userAnswer}`;
                    userAnswerElement.classList.add('review-incorrect');
                }
                
                reviewItem.appendChild(userAnswerElement);
                
                // Add to review items
                reviewItems.appendChild(reviewItem);
            });
            
            // Show review container
            resultsContainer.style.display = 'none';
            leaderboardContainer.style.display = 'none';
            reviewContainer.style.display = 'block';
        }

        function resetQuiz() {
            // Reset quiz variables
            currentQuestionIndex = 0;
            score = 0;
            totalTime = 0;
            userAnswers = [];
            
            // Show topic selection
            quizSetup.style.display = 'block';
            quizContainer.style.display = 'none';
            resultsContainer.style.display = 'none';
            leaderboardContainer.style.display = 'none';
            reviewContainer.style.display = 'none';
            
            // Reset topic selection
            topicSelect.selectedIndex = 0;
        }

        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            resetQuiz();
        });
    </script>
</body>
</html>